---
permalink: ilm/what-ilm-rule-is.html 
sidebar: sidebar 
keywords: what is information lifecycle rule, ilm rule 
summary: 'Pour gérer les objets, vous créez un ensemble de règles de gestion du cycle de vie des informations (ILM) et les organisez dans une politique ILM.' 
---
= Utiliser les règles ILM pour gérer les objets
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
Pour gérer les objets, vous créez un ensemble de règles de gestion du cycle de vie des informations (ILM) et les organisez dans une politique ILM.

Chaque objet ingéré dans le système est évalué par rapport à la politique active.  Lorsqu'une règle de la politique correspond aux métadonnées d'un objet, les instructions de la règle déterminent les actions que StorageGRID entreprend pour copier et stocker cet objet.


NOTE: Les métadonnées des objets ne sont pas gérées par les règles ILM.  Au lieu de cela, les métadonnées des objets sont stockées dans une base de données Cassandra dans ce que l’on appelle un magasin de métadonnées.  Trois copies des métadonnées de l'objet sont automatiquement conservées sur chaque site pour protéger les données contre toute perte.



== Éléments d'une règle ILM

Une règle ILM comporte trois éléments :

* *Critères de filtrage* : Les filtres de base et avancés d'une règle définissent les objets auxquels la règle s'applique.  Si un objet correspond à tous les filtres, StorageGRID applique la règle et crée les copies d'objet spécifiées dans les instructions de placement de la règle.
* *Instructions de placement* : Les instructions de placement d'une règle définissent le nombre, le type et l'emplacement des copies d'objet.  Chaque règle peut inclure une séquence d'instructions de placement pour modifier le nombre, le type et l'emplacement des copies d'objets au fil du temps.  Lorsque la période d'un placement expire, les instructions du placement suivant sont automatiquement appliquées par la prochaine évaluation ILM.
* *Comportement d'ingestion* : Le comportement d'ingestion d'une règle vous permet de choisir comment les objets filtrés par la règle sont protégés lorsqu'ils sont ingérés (lorsqu'un client S3 enregistre un objet dans la grille).




== Filtrage des règles ILM

Lorsque vous créez une règle ILM, vous spécifiez des filtres pour identifier les objets auxquels la règle s'applique.

Dans le cas le plus simple, une règle peut n’utiliser aucun filtre.  Toute règle qui n’utilise pas de filtres s’applique à tous les objets, elle doit donc être la dernière règle (par défaut) d’une stratégie ILM.  La règle par défaut fournit des instructions de stockage pour les objets qui ne correspondent pas aux filtres d'une autre règle.

* Les filtres de base vous permettent d'appliquer différentes règles à de grands groupes d'objets distincts.  Ces filtres vous permettent d'appliquer une règle à des comptes de locataire spécifiques, à des compartiments S3 spécifiques ou aux deux.
+
Les filtres de base vous offrent un moyen simple d’appliquer différentes règles à un grand nombre d’objets.  Par exemple, les dossiers financiers de votre entreprise peuvent devoir être stockés pour répondre aux exigences réglementaires, tandis que les données du service marketing peuvent devoir être stockées pour faciliter les opérations quotidiennes.  Après avoir créé des comptes locataires distincts pour chaque service ou après avoir séparé les données des différents services dans des compartiments S3 distincts, vous pouvez facilement créer une règle qui s'applique à tous les enregistrements financiers et une deuxième règle qui s'applique à toutes les données marketing.

* Les filtres avancés vous offrent un contrôle précis.  Vous pouvez créer des filtres pour sélectionner des objets en fonction des propriétés d’objet suivantes :
+
** Temps d'ingestion
** Heure du dernier accès
** Tout ou partie du nom de l'objet (Clé)
** Contrainte de localisation (S3 uniquement)
** Taille de l'objet
** Métadonnées de l'utilisateur
** Balise d'objet (S3 uniquement)




Vous pouvez filtrer les objets selon des critères très spécifiques.  Par exemple, les objets stockés par le service d'imagerie d'un hôpital peuvent être utilisés fréquemment lorsqu'ils ont moins de 30 jours et rarement par la suite, tandis que les objets contenant des informations sur les visites des patients peuvent devoir être copiés vers le service de facturation du siège du réseau de santé.  Vous pouvez créer des filtres qui identifient chaque type d'objet en fonction du nom de l'objet, de la taille, des balises d'objet S3 ou de tout autre critère pertinent, puis créer des règles distinctes pour stocker chaque ensemble d'objets de manière appropriée.

Vous pouvez combiner des filtres selon vos besoins dans une seule règle.  Par exemple, le service marketing peut souhaiter stocker des fichiers image volumineux différemment de ses enregistrements de fournisseurs, tandis que le service des ressources humaines peut avoir besoin de stocker les enregistrements du personnel dans une zone géographique spécifique et les informations de politique de manière centralisée.  Dans ce cas, vous pouvez créer des règles qui filtrent par compte de locataire pour séparer les enregistrements de chaque service, tout en utilisant des filtres dans chaque règle pour identifier le type spécifique d'objets auquel la règle s'applique.



== Instructions de placement des règles ILM

Les instructions de placement déterminent où, quand et comment les données d'objet sont stockées.  Une règle ILM peut inclure une ou plusieurs instructions de placement.  Chaque instruction de placement s'applique à une seule période de temps.

Lorsque vous créez des instructions de placement :

* Vous commencez par spécifier l’heure de référence, qui détermine quand les instructions de placement commencent.  L'heure de référence peut être celle à laquelle un objet est ingéré, celle à laquelle un objet est accédé, celle à laquelle un objet versionné devient non actuel ou une heure définie par l'utilisateur.
* Ensuite, vous spécifiez quand le placement s’appliquera, par rapport à l’heure de référence.  Par exemple, un placement peut commencer le jour 0 et se poursuivre pendant 365 jours, par rapport au moment où l'objet a été ingéré.
* Enfin, vous spécifiez le type de copies (réplication ou codage d'effacement) et l'emplacement où les copies sont stockées.  Par exemple, vous souhaiterez peut-être stocker deux copies répliquées sur deux sites différents.


Chaque règle peut définir plusieurs emplacements pour une même période et des emplacements différents pour différentes périodes.

* Pour placer des objets à plusieurs emplacements au cours d'une même période, sélectionnez *Ajouter un autre type ou emplacement* pour ajouter plusieurs lignes pour cette période.
* Pour placer des objets à différents endroits et à différentes périodes, sélectionnez *Ajouter une autre période* pour ajouter la période suivante.  Ensuite, spécifiez une ou plusieurs lignes dans la période.


L'exemple montre deux instructions de placement sur la page Définir les placements de l'assistant Créer une règle ILM.

image::../media/ilm_rule_multiple_placements_in_single_time_period.png[Écran de placements ILM de Grid Manager]

La première instruction de placementimage:../media/icon_number_1.png["Icône numéro 1"] comporte deux lignes pour la première année :

* La première ligne crée deux copies d’objets répliquées sur deux sites de centres de données.
* La deuxième ligne crée une copie codée par effacement 6+3 utilisant tous les sites du centre de données.


La deuxième instruction de placementimage:../media/icon_number_2.png["Icône numéro 1"] crée deux copies après un an et conserve ces copies pour toujours.

Lorsque vous définissez l'ensemble des instructions de placement pour une règle, vous devez vous assurer qu'au moins une instruction de placement commence au jour 0, qu'il n'y a pas d'intervalle entre les périodes que vous avez définies et que l'instruction de placement finale continue soit indéfiniment, soit jusqu'à ce que vous n'ayez plus besoin de copies d'objet.

À l'expiration de chaque période de la règle, les instructions de placement de contenu pour la période suivante sont appliquées.  De nouvelles copies d’objets sont créées et toutes les copies inutiles sont supprimées.



== Comportement d'ingestion de règle ILM

Le comportement d'ingestion contrôle si les copies d'objet sont immédiatement placées conformément aux instructions de la règle, ou si des copies intermédiaires sont effectuées et les instructions de placement sont appliquées ultérieurement.  Les comportements d’ingestion suivants sont disponibles pour les règles ILM :

* *Équilibré* : StorageGRID tente de réaliser toutes les copies spécifiées dans la règle ILM lors de l'ingestion ; si cela n'est pas possible, des copies intermédiaires sont réalisées et le succès est renvoyé au client.  Les copies spécifiées dans la règle ILM sont réalisées lorsque cela est possible.
* *Strict* : Toutes les copies spécifiées dans la règle ILM doivent être effectuées avant que le succès ne soit renvoyé au client.
* *Double validation* : StorageGRID effectue immédiatement des copies intermédiaires de l'objet et renvoie la réussite au client.  Les copies spécifiées dans la règle ILM sont réalisées lorsque cela est possible.


.Informations connexes
* link:data-protection-options-for-ingest.html["Options d'ingestion"]
* link:advantages-disadvantages-of-ingest-options.html["Avantages, inconvénients et limites des options d'ingestion"]
* link:../s3/consistency-controls.html#how-consistency-controls-and-ILM-rules-interact["Comment les règles de cohérence et de gestion des informations interagissent pour affecter la protection des données"]




== Exemple de règle ILM

À titre d’exemple, une règle ILM pourrait spécifier ce qui suit :

* S'applique uniquement aux objets appartenant au locataire A.
* Créez deux copies répliquées de ces objets et stockez chaque copie dans un site différent.
* Conservez les deux copies « pour toujours », ce qui signifie que StorageGRID ne les supprimera pas automatiquement.  Au lieu de cela, StorageGRID conservera ces objets jusqu'à ce qu'ils soient supprimés par une demande de suppression du client ou par l'expiration d'un cycle de vie de bucket.
* Utilisez l'option Équilibré pour le comportement d'ingestion : l'instruction de placement sur deux sites est appliquée dès que le locataire A enregistre un objet dans StorageGRID, sauf s'il n'est pas possible de créer immédiatement les deux copies requises.
+
Par exemple, si le site 2 est inaccessible lorsque le locataire A enregistre un objet, StorageGRID effectuera deux copies intermédiaires sur les nœuds de stockage du site 1.  Dès que le site 2 sera disponible, StorageGRID effectuera la copie requise sur ce site.



.Informations connexes
* link:what-storage-pool-is.html["Qu'est-ce qu'un pool de stockage"]
* link:what-cloud-storage-pool-is.html["Qu'est-ce qu'un pool de stockage cloud"]

