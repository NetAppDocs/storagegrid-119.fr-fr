---
permalink: admin/grid-federation-create-connection.html 
sidebar: sidebar 
keywords: grid federation, create connection, configure connection 
summary: 'Vous pouvez créer une connexion de fédération de grille entre deux systèmes StorageGRID si vous souhaitez cloner les détails du locataire et répliquer les données de l"objet.' 
---
= Créer des connexions de fédération de grille
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
Vous pouvez créer une connexion de fédération de grille entre deux systèmes StorageGRID si vous souhaitez cloner les détails du locataire et répliquer les données de l'objet.

Comme le montre la figure, la création d’une connexion de fédération de grille comprend des étapes sur les deux grilles.  Vous ajoutez la connexion sur une grille et la complétez sur l'autre grille.  Vous pouvez commencer à partir de l'une ou l'autre grille.

image::../media/grid-federation-create-connection.png[aperçu graphique des étapes pour créer une connexion sur deux grilles]

.Avant de commencer
* Vous avez examiné lelink:grid-federation-overview.html["considérations et exigences"] pour configurer les connexions de fédération de grille.
* Si vous prévoyez d'utiliser des noms de domaine entièrement qualifiés (FQDN) pour chaque grille au lieu d'adresses IP ou VIP, vous savez quels noms utiliser et vous avez confirmé que le serveur DNS de chaque grille dispose des entrées appropriées.
* Vous utilisez unlink:../admin/web-browser-requirements.html["navigateur Web pris en charge"] .
* Vous disposez de l’autorisation d’accès root et de la phrase secrète de provisionnement pour les deux grilles.




== Ajouter une connexion

Effectuez ces étapes sur l’un des deux systèmes StorageGRID .

.Étapes
. Sign in au gestionnaire de grille à partir du nœud d’administration principal sur l’une ou l’autre grille.
. Sélectionnez *CONFIGURATION* > *Système* > *Fédération de grille*.
. Sélectionnez *Ajouter une connexion*.
. Entrez les détails de la connexion.
+
[cols="1a,2a"]
|===
| Champ | Description 


 a| 
Nom de la connexion
 a| 
Un nom unique pour vous aider à reconnaître cette connexion, par exemple « Grille 1-Grille 2 ».



 a| 
FQDN ou IP pour cette grille
 a| 
L'un des éléments suivants :

** Le FQDN de la grille à laquelle vous êtes actuellement connecté
** Une adresse VIP d'un groupe HA sur cette grille
** Une adresse IP d’un nœud d’administration ou d’un nœud de passerelle sur cette grille.  L'IP peut se trouver sur n'importe quel réseau que la grille de destination peut atteindre.




 a| 
Port
 a| 
Le port que vous souhaitez utiliser pour cette connexion.  Vous pouvez saisir n’importe quel numéro de port inutilisé compris entre 23 000 et 23 999.

Les deux réseaux de cette connexion utiliseront le même port.  Vous devez vous assurer qu'aucun nœud de l'une ou l'autre grille n'utilise ce port pour d'autres connexions.



 a| 
Jours de validité du certificat pour cette grille
 a| 
Le nombre de jours pendant lesquels vous souhaitez que les certificats de sécurité pour cette grille dans la connexion soient valides.  La valeur par défaut est de 730 jours (2 ans), mais vous pouvez saisir n'importe quelle valeur comprise entre 1 et 762 jours.

StorageGRID génère automatiquement des certificats client et serveur pour chaque grille lorsque vous enregistrez la connexion.



 a| 
Mot de passe d'approvisionnement pour cette grille
 a| 
La phrase secrète de provisionnement pour la grille à laquelle vous êtes connecté.



 a| 
FQDN ou IP pour l'autre grille
 a| 
L'un des éléments suivants :

** Le FQDN du réseau auquel vous souhaitez vous connecter
** Une adresse VIP d'un groupe HA sur l'autre grille
** Une adresse IP d’un nœud d’administration ou d’un nœud de passerelle sur l’autre grille.  L'IP peut se trouver sur n'importe quel réseau que la grille source peut atteindre.


|===
. Sélectionnez *Enregistrer et continuer*.
. Pour l'étape Télécharger le fichier de vérification, sélectionnez *Télécharger le fichier de vérification*.
+
Une fois la connexion établie sur l’autre grille, vous ne pouvez plus télécharger le fichier de vérification à partir de l’une ou l’autre des grilles.

. Localisez le fichier téléchargé(`_connection-name_.grid-federation` ), et enregistrez-le dans un endroit sûr.
+

CAUTION: Ce fichier contient des secrets (masqués comme `***` ) et d’autres détails sensibles et doivent être stockés et transmis en toute sécurité.

. Sélectionnez *Fermer* pour revenir à la page de la fédération Grid.
. Confirmez que la nouvelle connexion est affichée et que son *Statut de connexion* est *En attente de connexion*.
. Fournir le `_connection-name_.grid-federation` fichier à l'administrateur de la grille pour l'autre grille.




== Connexion complète

Effectuez ces étapes sur le système StorageGRID auquel vous vous connectez (l’autre grille).

.Étapes
. Sign in au gestionnaire de grille à partir du nœud d’administration principal.
. Sélectionnez *CONFIGURATION* > *Système* > *Fédération de grille*.
. Sélectionnez *Télécharger le fichier de vérification* pour accéder à la page de téléchargement.
. Sélectionnez *Télécharger le fichier de vérification*.  Ensuite, recherchez et sélectionnez le fichier qui a été téléchargé à partir de la première grille(`_connection-name_.grid-federation` ).
+
Les détails de la connexion sont affichés.

. Vous pouvez également saisir un nombre différent de jours de validité pour les certificats de sécurité de cette grille.  L'entrée *Jours de validité du certificat* correspond par défaut à la valeur que vous avez saisie dans la première grille, mais chaque grille peut utiliser des dates d'expiration différentes.
+
En général, utilisez le même nombre de jours pour les certificats des deux côtés de la connexion.

+

CAUTION: Si les certificats à l'une ou l'autre extrémité de la connexion expirent, la connexion cessera de fonctionner et les réplications seront en attente jusqu'à ce que les certificats soient mis à jour.

. Saisissez la phrase secrète de provisionnement pour la grille à laquelle vous êtes actuellement connecté.
. Sélectionnez *Enregistrer et tester*.
+
Les certificats sont générés et la connexion est testée.  Si la connexion est valide, un message de réussite s'affiche et la nouvelle connexion est répertoriée sur la page de la fédération Grid.  Le *statut de connexion* sera *Connecté*.

+
Si un message d’erreur apparaît, corrigez les problèmes. Voir link:grid-federation-troubleshoot.html["Résoudre les erreurs de fédération de grille"] .

. Accédez à la page de la fédération Grid sur la première grille et actualisez le navigateur.  Confirmez que le *statut de connexion* est désormais *Connecté*.
. Une fois la connexion établie, supprimez en toute sécurité toutes les copies du fichier de vérification.
+
Si vous modifiez cette connexion, un nouveau fichier de vérification sera créé.  Le fichier original ne peut pas être réutilisé.



.Après avoir terminé
* Passez en revue les considérations pourlink:grid-federation-manage-tenants.html["gestion des locataires autorisés"] .
* link:creating-tenant-account.html["Créer un ou plusieurs nouveaux comptes locataires"], attribuez l'autorisation *Utiliser la connexion à la fédération de grille* et sélectionnez la nouvelle connexion.
* link:grid-federation-manage-connection.html["Gérer la connexion"]selon les besoins.  Vous pouvez modifier les valeurs de connexion, tester une connexion, faire pivoter les certificats de connexion ou supprimer une connexion.
* link:../monitor/grid-federation-monitor-connections.html["Surveiller la connexion"]dans le cadre de vos activités normales de surveillance StorageGRID .
* link:grid-federation-troubleshoot.html["Dépanner la connexion"], y compris la résolution des alertes et des erreurs liées au clonage de compte et à la réplication inter-grille.

